<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Rizu!</title>
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Login Container -->
    <div class="login-container" id="loginContainer">
        <h1><span class="star-emoji">✨</span> Rizu's Birthday Portal <span class="star-emoji">✨</span></h1>
        <form id="loginForm">
            <input type="password" id="passwordInput" placeholder="Enter the super secret password..." required>
            <button type="submit">Enter</button>
            <div class="error-message" id="errorMessage">Oops! That's not the super secret password. Try again!</div>
        </form>
    </div>

    <!-- Main Container -->
    <div class="main-container" id="mainContainer">
        <!-- Navigation Toggle -->
        <button class="nav-toggle collapsed" id="navToggle" onclick="toggleNav()">☰ Memory Lane</button>

        <!-- Side Navigation -->
        <nav class="side-nav collapsed" id="sideNav">
            <h2>Birthday Archive</h2>
            <a href="#" class="year-link active" onclick="loadYear(2024)">2024 - The Original</a>
        </nav>

        <!-- Countdown Timer -->
        <div class="countdown-container">
            <h3>Next Birthday In:</h3>
            <div class="countdown-timer" id="countdown">
                <div class="time-unit">
                    <span class="time-value" id="days">00</span>
                    <span class="time-label">Days</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="hours">00</span>
                    <span class="time-label">Hours</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="minutes">00</span>
                    <span class="time-label">Minutes</span>
                </div>
                <div class="time-unit">
                    <span class="time-value" id="seconds">00</span>
                    <span class="time-label">Seconds</span>
                </div>
            </div>
        </div>

        <!-- Content Frame -->
        <iframe class="content-frame" id="contentFrame" src=""></iframe>
    </div>

    <script>
        // authentication
        const correctPassword = 'rizu';
        
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('passwordInput').value;
            
            if (password.toLowerCase() === correctPassword) {
                sessionStorage.setItem('authenticated', 'true');
                
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('mainContainer').style.display = 'block';
                
                loadYear(2024);
                
                updateCountdown();
                setInterval(updateCountdown, 1000);
            } else {
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('passwordInput').value = '';
            }
        });

        // check if already authenticated
        if (sessionStorage.getItem('authenticated') === 'true') {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
            loadYear(2024);
            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // navigation
        function toggleNav() {
            const nav = document.getElementById('sideNav');
            const toggle = document.getElementById('navToggle');
            
            nav.classList.toggle('collapsed');
            toggle.classList.toggle('collapsed');
        }

        function loadYear(year) {
            document.getElementById('contentFrame').src = `years/${year}/index.html`;
            
            document.querySelectorAll('.year-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // countdown timer
        function updateCountdown() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            let birthday = new Date(currentYear, 6, 1);
            
            if (now > birthday) {
                birthday = new Date(currentYear + 1, 6, 1);
            }
            
            const difference = birthday - now;
            
            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = String(days).padStart(2, '0');
            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }
    </script>
</body>

</html>